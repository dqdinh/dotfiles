# source -- https://github.com/jdavis/dotfiles/blob/master/.tmux.conf

# Works only on tmux 1.9+

# Core Options
#

# OSX ONLY!
#Every time you open a new window or pane, it’ll run reattach-to-user-namespace,
#which digs into some of Apple’s inner-workings to enable pbcopy and pbpaste support.
set-option -g default-command "reattach-to-user-namespace -l zsh"

# Use an easier prefix, not C-a
set-option -g prefix C-b

# C-b C-b to switch to last window
bind-key C-b last-window

# Allows for faster key repetition
set-option -s escape-time 0

# Reload Configuration
bind-key r source-file ~/.tmux.conf \; display-message "Reloaded Config."

# No Mouse Mode for Me
set-option -g mode-mouse on
set-option -g mouse-select-pane on
set-option -g mouse-resize-pane on
set-option -g mouse-select-window on

# Terminal.app scrolling
set-option -g terminal-overrides 'xterm*:smcup@:rmcup@'

# Color settings
set-option -g default-terminal "screen-256color"

# Activity monitoring
set-window-option -g monitor-activity on
set-option -g visual-activity on

#
# Basic Keybindings
#

# Overwrite defaults
bind-key c new-window

# Clear the screen. Often used after sending C-l to the terminal.
bind-key C-k clear-history

# Use Vi Key Mode
set-window-option -g mode-keys vi

#
# Status Line Settings
#

# Update every 60 seconds
set-option -g status-interval 60

# Center status bar
set-option -g status-justify centre

# Left Side of Status Line
set-option -g status-left-length 40
set-option -g status-left "#[fg=green]\[#S\] :: #[fg=yellow]#I"

# Right Side of Status Line
set-option -g status-right "#[fg=cyan]%d %b %R"

# Status Bar Unicode
set-option -g status-utf8 on

#
# Window Settings
#

# Automatic naming of windows
set-window-option -g allow-rename off

# Easier Splitting of Windows
bind-key | split-window -h
bind-key - split-window -v

# Start numbering at 1 for both windows and panes
set-option -g base-index 1
set-window-option -g pane-base-index 1

# Window Unicode on
set-window -g utf8 on

# Show Window Status format as: "|Index:Name|"
set-window -g window-status-current-format "|#I:#W|"

#
# Pane Settings
#

# Move around using Vim like bindings
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Resize panes (-r for repeatability)
bind-key -r H resize-pane -L 2
bind-key -r J resize-pane -D 2
bind-key -r K resize-pane -U 2
bind-key -r L resize-pane -R 2

#
# Color Settings
#

# Status Line Colors
set-option -g status-fg white
set-option -g status-bg black

# Window List Colors
set-window-option -g window-status-fg cyan
set-window-option -g window-status-bg default
set-window-option -g window-status-attr dim

# Active Window Colors
set-window-option -g window-status-current-fg white
set-window-option -g window-status-current-bg cyan
set-window-option -g window-status-current-attr bright

# Pane Colors
set-option -g pane-border-fg green
set-option -g pane-border-bg black
set-option -g pane-active-border-fg white
set-option -g pane-active-border-bg yellow

# Message Colors
set-option -g message-fg white
set-option -g message-bg black
set-option -g message-attr bright

#
# Additional Settings
#

#
# Plugins
#

# List of plugins
set -g @tpm_plugins " \
  tmux-plugins/tpm \
  tmux-plugins/tmux-copycat \
  tmux-plugins/tmux-resurrect \
  tmux-plugins/tmux-sidebar \
"

# Initializes tpm, keep this line at the very bottom of tmux.conf
run-shell ~/.tmux/plugins/tpm/tpm

# osx only?
# # Setup 'v' to begin selection as in Vim
setw -g mode-keys vi

bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# # Update default binding of `Enter` to also use copy-pipe
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"
